<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivia - Cultura General</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <header>
        <div class="banner">
            <img src="Trivia Banner.jpg" alt="" class="banner-img">
        </div>
        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="clasificacion.html">Puntuación</a></li>
                <li><a href="sugerencias.html">Sugerencias</a></li>
            </ul>
        </nav>
    </header>

        <section class="preguntas-section">
            <h2>Responde las siguientes preguntas</h2>
    
            <div id="contenedor-imagen" style="display: flex; justify-content: center; align-items: center;">
                <img id="pregunta-imagen" src="PiramidesGiza.jpg" alt="Piramides de Giza" style="display: none; max-width: 50%; height: auto;">
            </div>
    
            <div id="pregunta-text"></div>
            <div id="opciones-container"></div>
            <button id="siguiente" style="display: none;" onclick="validarCheckbox()">Siguiente</button>
        </section>
    
        <script>
            // Preguntas de Cultura General
            const preguntas = [
                {
                    pregunta: "¿Cuál es la capital de Francia?",
                    opciones: ["Madrid", "París", "Londres", "Roma"],
                    respuestaCorrecta: 1,
                    tipo: "boton"
                },
                {
                    pregunta: "¿En qué país se encuentra esta maravilla del mundo?",
                    opciones: ["Egipto", "España", "México", "Portugal"],
                    respuestaCorrecta: 0,
                    imagen: "PiramidesGiza.jpg",
                    tipo: "boton"
                },
                {
                    pregunta: "¿Cuáles son colores primarios?",
                    opciones: ["Rojo", "Verde", "Azul", "Amarillo"],
                    respuestaCorrecta: [0, 2, 3],
                    tipo: "checkbox"
                },
                {
                    pregunta: "¿Qué planetas son gaseosos?",
                    opciones: ["Marte", "Júpiter", "Saturno", "Urano"],
                    respuestaCorrecta: [1, 2, 3],
                    tipo: "checkbox"
                },
                {
                    pregunta: "¿Qué animales son mamíferos?",
                    opciones: ["Delfín", "Tiburón", "Murciélago", "Pingüino"],
                    respuestaCorrecta: [0, 2],
                    tipo: "checkbox"
                },
                {
                    pregunta: "¿Quién pintó la Mona Lisa?",
                    opciones: ["Miguel Ángel", "Vincent Van Gogh", "Leonardo Da Vinci", "Pablo Picasso"],
                    respuestaCorrecta: 2,
                    tipo: "boton"
                },
                {
                    pregunta: "¿En qué año llegó el hombre a la luna?",
                    opciones: ["1965", "1969", "1972", "1958"],
                    respuestaCorrecta: 1,
                    tipo: "boton"
                },
                {
                    pregunta: "¿Cuál es el océano más grande del mundo?",
                    opciones: ["Atlántico", "Pacífico", "Índico", "Ártico"],
                    respuestaCorrecta: 1,
                    tipo: "boton"
                },
                {
                    pregunta: "¿Cuál es el metal más ligero?",
                    opciones: ["Hierro", "Plata", "Litio", "Mercurio"],
                    respuestaCorrecta: 2,
                    tipo: "boton"
                },
                {
                    pregunta: "¿Qué científico propuso la teoría de la relatividad?",
                    opciones: ["Isaac Newton", "Galileo Galilei", "Albert Einstein", "Marie Curie"],
                    respuestaCorrecta: 2,
                    tipo: "boton"
                }

            ];
    
            let preguntaActual = 0;
        let respuestasCorrectas = 0;

        function mostrarPregunta() {
            const preguntaTexto = document.getElementById("pregunta-text");
            const opcionesContainer = document.getElementById("opciones-container");
            const imagenElemento = document.getElementById("pregunta-imagen");
            const botonSiguiente = document.getElementById("siguiente");

            opcionesContainer.innerHTML = "";

            const pregunta = preguntas[preguntaActual];
            preguntaTexto.textContent = pregunta.pregunta;

            if (pregunta.imagen) {
                imagenElemento.src = pregunta.imagen;
                imagenElemento.style.display = "block";
            } else {
                imagenElemento.style.display = "none";
            }

            if (pregunta.tipo === "boton") {
                botonSiguiente.style.display = "none";
                for (let i = 0; i < pregunta.opciones.length; i++) {
                    const boton = document.createElement("button");
                    boton.textContent = pregunta.opciones[i];
                    boton.className = "opcion";
                    boton.onclick = () => seleccionarRespuesta(i);
                    opcionesContainer.appendChild(boton);
                }
            } else if (pregunta.tipo === "checkbox") {
                botonSiguiente.style.display = "block";
                for (let i = 0; i < pregunta.opciones.length; i++) {
                    const checkbox = document.createElement("div");
                    checkbox.setAttribute("role", "checkbox");
                    checkbox.setAttribute("aria-checked", "false");
                    checkbox.setAttribute("tabindex", "0");
                    checkbox.id = `checkbox-${i}`;
                    checkbox.textContent = pregunta.opciones[i];

                    checkbox.onclick = () => toggleCheckbox(checkbox);
                    checkbox.onkeydown = (e) => {
                        if (e.key === " " || e.key === "Enter") {
                            e.preventDefault();
                            toggleCheckbox(checkbox);
                        }
                    };

                    opcionesContainer.appendChild(checkbox);
                }
            }
        }

        function toggleCheckbox(checkbox) {
            const isChecked = checkbox.getAttribute("aria-checked") === "true";
            checkbox.setAttribute("aria-checked", !isChecked);
            checkbox.classList.toggle("checked", !isChecked);
        }

        function seleccionarRespuesta(opcionSeleccionada) {
            const pregunta = preguntas[preguntaActual];
            if (opcionSeleccionada === pregunta.respuestaCorrecta) {
                respuestasCorrectas++;
            }
            avanzarPregunta();
        }

        function validarCheckbox() {
            const pregunta = preguntas[preguntaActual];
            const seleccionados = Array.from(
                document.querySelectorAll(`#opciones-container [role="checkbox"][aria-checked="true"]`)
            ).map((checkbox) => parseInt(checkbox.id.split("-")[1]));

            const esCorrecto =
                JSON.stringify(seleccionados.sort()) === JSON.stringify(pregunta.respuestaCorrecta.sort());

            if (esCorrecto) {
                respuestasCorrectas++;
            }
            avanzarPregunta();
        }

        function avanzarPregunta() {
            preguntaActual++;

            if (preguntaActual < preguntas.length) {
                mostrarPregunta();
            } else {
                // Guarda la puntuación en localStorage en el formato correcto
                let puntuaciones = JSON.parse(localStorage.getItem("puntuaciones")) || {};
                puntuaciones["puntuacion_Cultura General"] = {
                    categoria: "Cultura General",
                    correctas: respuestasCorrectas,
                    total: preguntas.length
                };
                localStorage.setItem("puntuaciones", JSON.stringify(puntuaciones));

                // Redirige a la página de clasificación al terminar
                window.location.href = "clasificacion.html";
            }
        }


        window.onload = mostrarPregunta;
    </script>

</body>
</html>
